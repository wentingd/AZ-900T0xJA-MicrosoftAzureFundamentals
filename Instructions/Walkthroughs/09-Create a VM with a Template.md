---
wts:
    title: '09 - テンプレートを使用して VM を作成する (10 分)'
    module: 'モジュール 03: コア ソリューションおよび管理ツールに関する説明'
---
# 09 - テンプレートを使用した VM の作成

このチュートリアルでは、QuickStart テンプレートを使用して仮想マシンをデプロイし、監視機能を調べます。

# タスク 1: ギャラリーを参照してテンプレートを特定する (10 分)

このタスクでは、Azure QuickStart ギャラリーを参照し、仮想マシンを作成するテンプレートをデプロイします。 

1. ラボ環境内で、ブラウザーで新しいタブを開き、T https://azure.microsoft.com/en-us/resources/templates/?azure-portal=true をアドレス欄に入力してアクセスします。ギャラリーには、人気のあるテンプレートや最近更新されたテンプレートが多数あります。これらのテンプレートを使用すると、一般的なソフトウェア パッケージのインストールを含む、Azure リソースのデプロイを自動化できます。

2. 「Deploy a simple Windows VM」テンプレートを検索して選びます。(見つからない場合はT https://azure.microsoft.com/resources/templates/vm-simple-windows/ でアクセスできます)

3. 「**Azure にデプロイ**」 ボタンをクリックします。ブラウザー セッションは自動的に [Azure portal](http://portal.azure.com/) にリダイレクトされます。

    **注**: 「**Azure にデプロイ**」 ボタンを使用すると、テンプレートを Azure portal に直接デプロイできます。このようなデプロイの際は、一部の構成パラメーターについてのみプロンプトが表示されます。 

4. プロンプトが表示されたら、このラボで使用する Azure サブスクリプションにサインインします。

5. 「**テンプレートの編集**」 をクリックします。Resource Manager テンプレート形式は、JSON 形式を使用しています。パラメーターと変数を確認します。  次に、仮想マシン名のパラメーターを見つけます。名前を **myVMTemplate** に変更します。変更を**保存**します。Azure portal の「**カスタム デプロイ**」ブレードに戻ります。

    ![VM 名が変更されたテンプレートのスクリーンショット。](../images/0901.png)

6. 「**カスタム デプロイ**」 ブレードで、テンプレートに必要なパラメーターを構成します (ラベルがグローバルに一意になるように、DNS ラベルのプレフィックスの ***xxxx*** を文字と数字に置き換えます)。その他は既定値のままにします。 

    | 設定| 値|
    |----|----|
    | サブスクリプション | **デフォルト値のままにします**|
    | リソース グループ | **myRGTemplate** (新規作成) |
    | 場所 | **デフォルト値のままにします** |
    | 管理者ユーザー名 | **azureuser** |
    | 管理者パスワード | **Pa$$w0rd1234** |
    | DNS ラベルのプレフィックス | **myvmtemplatexxxx** |
    | Windows OS バージョン | **2019-Datacenter** |
    | | |

7. 「**確認および作成**」 をクリックします。

8. 検証できたら、 「**作成**」 ボタンをクリックします。仮想マシンをデプロイするには、5 ? 7 分かかる場合があります。 

# タスク 2: 仮想マシンのデプロイを確認および監視する

このタスクでは、正しくデプロイされた仮想マシンを確認します。 

1. 「**すべてのサービス**」 ブレードで、「**仮想マシン**」 または「**virtual machine**」を検索して選択します。

2. 新しい仮想マシンが作成されたことを確認します。 

    ![仮想マシン ページのスクリーンショット。新しい VM が表示され、実行されます。](../images/0902.png)

3. 仮想マシンを選択し、「**概要**」ウィンドウを下にスクロールして監視データを表示します。

    **注**: 監視する時間枠は 1 時間から 30 日まで調整可能です。

4. 「**CPU (平均)**」、「**ネットワーク (合計)**」、「**ディスク バイト (合計)**」 を含むさまざまなグラフを確認します。 

    ![仮想マシンの監視グラフのスクリーンショット。](../images/0903.png)

5. 任意のグラフをクリックします。「**メトリックを追加**」 し、グラフの種類を変更できることに確認します。

6. 「**概要**」 ブレードに戻ります。

7. 「**アクティビティ ログ**」 (左側のウィンドウ) をクリックします。アクティビティ ログには、リソースの作成や変更などのイベントが記録されます。 

8. 「**フィルターの追加**」 をクリックし、さまざまなイベントの種類と操作を検索してみます。 

    ![「イベントの種類」が選択された「フィルターの追加」ページのスクリーンショット。](../images/0904.png)

**注**: 追加コストを回避するには、このリソース グループを削除します。リソース グループを検索し、リソース グループをクリックして、「**リソース グループの削除**」 をクリックします。リソース グループの名前を確認し、「**削除**」をクリックします。**通知**を監視して、削除の進行状況を確認します。
